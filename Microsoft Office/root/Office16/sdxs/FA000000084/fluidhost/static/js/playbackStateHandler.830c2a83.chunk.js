"use strict";(self.webpackChunkfluidhost=self.webpackChunkfluidhost||[]).push([[26853],{52564:(a,e,t)=>{t.r(e),t.d(e,{getInstance:()=>i});var l=t(56142),s=t(899),r=t(16460);let n;function i(){return void 0==n&&(n=new h),n}class h{constructor(){this.currentlyPlayingPlayer=void 0,this.allPlayers=[],this.broadcastChannel=void 0,this.hostName=(0,s.xE)().appName,this.updateComponentPlayer=a=>e=>{var t;"Playing"===e&&(this.currentlyPlayingPlayer&&this.currentlyPlayingPlayer!==a&&this.currentlyPlayingPlayer.pause(),this.currentlyPlayingPlayer=a,null===(t=this.broadcastChannel)||void 0===t||t.postMessage(this.hostName))},this.broadcastChannel=new BroadcastChannel("LoopPlaybackBroadCast_"+this.hostName),(0,r.DP)((a=>{a.detail.state==r.Lb.Pause&&this.pauseCurrentPlayer()}))}get Disposable(){return this}dispose(){var a;null===(a=this.allPlayers)||void 0===a||a.forEach((a=>{a.off("playbackStateChanged",this.updateComponentPlayer)})),delete this.currentlyPlayingPlayer}registerPlayer(a){var e;null===(e=this.allPlayers)||void 0===e||e.push(a),a.on("playbackStateChanged",this.updateComponentPlayer(a)),this.broadcastChannel&&(this.broadcastChannel.onmessage=a=>{(0,l.Rm)("received: ".concat(a.data)),this.pauseCurrentPlayer()})}pauseCurrentPlayer(){var a;null===(a=this.currentlyPlayingPlayer)||void 0===a||a.pause(),this.currentlyPlayingPlayer=void 0}get PlaybackStateHandler(){return this}}}}]);
//# sourceMappingURL=playbackStateHandler.830c2a83.chunk.js.map