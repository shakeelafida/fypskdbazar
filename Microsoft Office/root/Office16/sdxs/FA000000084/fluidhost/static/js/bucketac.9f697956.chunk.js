"use strict";(self.webpackChunkfluidhost=self.webpackChunkfluidhost||[]).push([[25785],{36591:(e,t,o)=>{o.d(t,{C:()=>s});class s{constructor(e,t,o,s,i){this.dispatcher=e,this.logicModuleProviders=t,this.entityStoreSet=o,this.clientSettings=s,this.loggers=i}}},1965:(e,t,o)=>{o.r(t),o.d(t,{BucketActionCreator:()=>k});var s=o(38752),i=o(36591),n=o(24723),a=o(52274),r=o(78332),c=o(64226),u=o(96891),l=o(55491),d=o.n(l),h=o(98424);class k extends i.C{get name(){return u.M.BucketActionCreator}async fetchBucketsForPlan(e,t){(await this.logicModuleProviders.bucketModule()).fetchBucketsForPlanAsync(e,t).catch((async t=>{if(!(t.error instanceof a.U)){var o,s;const i=await this.logicModuleProviders.notificationModule(),n=null===(o=t.response)||void 0===o?void 0:o.status,a=null===(s=t.response)||void 0===s?void 0:s.statusText;i.showErrorInternal(c.fc.GetBucketsForPlanError,n,a,e,t.response)}}))}async fetchBucket(e,t){(await this.logicModuleProviders.bucketModule()).fetchBucketAsync(e,t).catch((e=>{}))}async createBucket(e){const t=await this.logicModuleProviders.bucketModule(),o=await this.logicModuleProviders.notificationModule();t.createBucketAsync(e).then((e=>{o.enqueueHiddenToastNotification("SharedComponents_CreateBucketToastTitle",[],e.title)})).catch((t=>{if(!(t.error instanceof a.U)){var s,i;const n=null===(s=t.response)||void 0===s?void 0:s.status,a=null===(i=t.response)||void 0===i?void 0:i.statusText;o.showErrorInternal(c.fc.CreateBucketError,n,a,void 0,t.response,[e.title])}}))}async deleteBucket(e,t){var o;const s=this.entityStoreSet.bucketStore.getBucket(e),i=null!==(o=null===s||void 0===s?void 0:s.title)&&void 0!==o?o:"";let l=!1;const d=this.entityStoreSet.taskStore.getTasksForBucket(e),h=await this.logicModuleProviders.notificationModule();null!=d&&d.forEach((async e=>{if(e.taskCreationSourceType!==n.w3.Publication){this.loggers.usageLogger.logData(this.name,u.M.DeleteTask);(await this.logicModuleProviders.taskModule()).deleteTaskAsync(e.id,e.itemVersion).catch((t=>{if(!(t.error instanceof a.U)){var o,s;const i=null===(o=t.response)||void 0===o?void 0:o.status,n=null===(s=t.response)||void 0===s?void 0:s.statusText;h.showErrorInternal(c.fc.DeleteTaskError,i,n,e.id,t.response)}}))}else l=!0})),l&&this.loggers.usageLogger.logData(this.name,u.M.DeleteBucketWithPublishedTasks),this.loggers.usageLogger.logData(this.name,u.M.DeleteBucket);(await this.logicModuleProviders.bucketModule()).deleteBucketAsync(e,t).then((()=>{l?h.enqueueToastNotification("Toasts_DeleteBucketWithPublishedTasksToastTitle",[i]):h.enqueueHiddenToastNotification("SharedComponents_DeleteBucketToastTitle",[],i)})).catch((t=>{if(!(t.error instanceof a.U)){var o,s;const i=null===(o=t.response)||void 0===o?void 0:o.status,n=null===(s=t.response)||void 0===s?void 0:s.statusText;h.showErrorInternal(c.fc.DeleteBucketError,i,n,e,t.response)}})),null==s&&l&&e.indexOf(r.iR)>-1&&h.enqueueToastNotification("Toasts_DeleteUncategorizedBucketWithPublishedTasksToastTitle",[])}async updateBucket(e,t){const o=e.getDiff(t);(await this.logicModuleProviders.bucketModule()).updateBucketAsync(e,t).then((()=>{this.announceBucketUpdates(o,e)})).catch((async t=>{if(!(t.error instanceof a.U)){var o,s;const i=await this.logicModuleProviders.notificationModule(),n=null===(o=t.response)||void 0===o?void 0:o.status,a=null===(s=t.response)||void 0===s?void 0:s.statusText;i.showErrorInternal(c.fc.UpdateBucketError,n,a,e.id,t.response)}}))}async announceBucketUpdates(e,t){const o=await this.logicModuleProviders.notificationModule();d()(e,((e,s)=>{switch(s){case"orderHint":const s=h.O.compareOrderHints(t.orderHint,e);s<0?o.enqueueHiddenToastNotification("SharedComponents_BucketMovedLeftToastTitle",[t.title]):s>0&&o.enqueueHiddenToastNotification("SharedComponents_BucketMovedRightToastTitle",[t.title]);break;case"title":o.enqueueHiddenToastNotification("SharedComponents_ChangeBucketTitleToastTitle",[e])}}))}constructor(e,t,o,i){super(e,t,o,s.B.clientSettings,i)}}}}]);
//# sourceMappingURL=bucketac.9f697956.chunk.js.map