"use strict";(self.webpackChunkfluidhost=self.webpackChunkfluidhost||[]).push([[95336],{36591:(e,t,o)=>{o.d(t,{C:()=>i});class i{constructor(e,t,o,i,n){this.dispatcher=e,this.logicModuleProviders=t,this.entityStoreSet=o,this.clientSettings=i,this.loggers=n}}},4915:(e,t,o)=>{o.r(t),o.d(t,{ContainerActionCreator:()=>v});var i=o(19285),n=o(24367),s=o(36591),r=o(64226),a=o(96891),c=o(78332),l=o(65818),d=o(52274),h=o(51857),u=o(18113),p=o(38752),g=o(74844);class v extends s.C{get name(){return a.M.ContainerActionCreator}async fetchContainers(e,t){(await this.logicModuleProviders.containerModule()).fetchContainers(e,t).then((t=>{t.NextContinuationToken&&this.fetchContainers(e,t.NextContinuationToken)}),(t=>{var o,n;const s=null===(o=t.response)||void 0===o?void 0:o.status,c=null===(n=t.response)||void 0===n?void 0:n.statusText,d=e===l.K.Group?r.fc.GetJoinedGroupsError:r.fc.GetDocumentPlansError;this.loggers.usageLogger.logData(a.M.NotificationBar,a.M.ErrorBarShown),this.dispatcher.dispatchAction(new i.Q(d,s,c,void 0,t.response))}))}fetchPermissionsWithTaskContext(e){var t;const o=this.entityStoreSet.planStore.getPlan(e.planId),i=null===(t=e.creationSource)||void 0===t?void 0:t.publication;if(null!=i||e.isProjectTask())if(null!=o){if(i){const e=i.id,t=o.container.externalId;this.fetchContainerPermissions([{containerId:t,publicationId:e}])}}else this.loggers.traceLogger.logTrace(507880210,g.k.Warning,"Plan is not in the store. [planId=".concat(e.planId,"][taskId=").concat(e.id,"]"));else this.loggers.traceLogger.logTrace(507880211,g.k.Warning,"Task is neither a published nor a project task. [planId=".concat(e.planId,"][taskId=").concat(e.id,"]"))}async fetchContainerPermissions(e){const t=await this.logicModuleProviders.permissionsModule();try{await t.fetchContainerPermissionsAsync(e)}catch(o){}}async fetchTaskPermissions(e){const t=await this.logicModuleProviders.permissionsModule();try{await t.fetchTaskPermissionsAsync(e)}catch(o){}}async deleteContainer(e){const t=this.entityStoreSet.containerMembershipStore.getPlanIdsForContainer(e.externalId),o=this.entityStoreSet.containerStore.getContainer(e.externalId);(await this.logicModuleProviders.containerModule()).deleteContainer(e).then((async()=>{var i;e.containerType===l.K.Group&&this.dispatcher.dispatchAction(new n.Z(new h.Q("SharedComponents_DeleteUnifiedGroupToastTitle",this.entityStoreSet.appContextStore.getFlights().ShowHiddenToasts,[],null!==(i=null===o||void 0===o?void 0:o.unifiedGroup.displayName)&&void 0!==i?i:"")));if(t){(await this.logicModuleProviders.userModule()).removeDeletedPlansFromUserDetailsAsync(t).catch((()=>{}))}}),(t=>{if(!(t.error instanceof d.U)){var o,n;const s=null===(o=t.response)||void 0===o?void 0:o.status,c=null===(n=t.response)||void 0===n?void 0:n.statusText;this.loggers.usageLogger.logData(a.M.NotificationBar,a.M.ErrorBarShown),this.dispatcher.dispatchAction(new i.Q(r.fc.DeleteUnifiedGroupError,s,c,e.externalId,t.response))}}))}async updateContainer(e){if(e.containerType===l.K.Roster){const t=await this.logicModuleProviders.containerModule(),o=await this.logicModuleProviders.notificationModule();t.setRosterContainerSensitivityLabelAsync(e).catch((t=>{if(!(t.error instanceof d.U)){var i,n;const s=null===(i=t.response)||void 0===i?void 0:i.status,a=null===(n=t.response)||void 0===n?void 0:n.statusText;o.showErrorInternal(r.fc.SetRosterSensitivityLabelError,s,a,e.externalId,t.response)}}))}}fetchCurrentUserToUSAndMsitGroupMembership(){const e=[c.YR];this.logicModuleProviders.unifiedGroupModule().then((t=>{t.checkCurrentUserToGroupsMembershipsAsync(e,u.Q.Priority5,!0).catch((()=>{}))}))}constructor(e,t,o,i){super(e,t,o,p.B.clientSettings,i)}}}}]);
//# sourceMappingURL=containerac.a65b4656.chunk.js.map